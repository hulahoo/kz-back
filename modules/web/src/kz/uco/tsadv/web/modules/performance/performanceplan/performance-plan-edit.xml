<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/screen/window.xsd"
        caption="msg://editorCaption"
        focusComponent="tabSheet"
        messagesPack="kz.uco.tsadv.web.modules.performance.performanceplan">
    <data>
        <instance id="performancePlanDc"
                  class="kz.uco.tsadv.modules.performance.model.PerformancePlan"
                  view="performancePlan.edit">
            <collection id="organizationsDc"
                        property="organizations"/>
            <collection id="positionsDc"
                        property="positions"/>
            <collection id="jobsDc"
                        property="jobs"/>
            <loader id="performancePlanDl"/>
        </instance>
         <collection id="assignedPerformancePlansDc"
                    class="kz.uco.tsadv.modules.performance.model.AssignedPerformancePlan"
                    view="assignedPerformancePlan.browse">
            <loader id="assignedPerformancePlansDl">
                <query>
                    <![CDATA[select e from tsadv$AssignedPerformancePlan e
                          where e.performancePlan = :performancePlan]]>
                </query>
            </loader>
        </collection>
        <collection id="instructionKpiDc"
                    class="kz.uco.tsadv.modules.performance.model.InstructionsKpi"
                    view="instructionsKpi.edit">
            <loader id="instructionKpiDl">
                <query>
                    <![CDATA[select e from tsadv_InstructionsKpi e
                          where e.performancePlan = :performancePlan]]>
                </query>
            </loader>
        </collection>
    </data>
    <dialogMode height="600"
                width="800"/>
    <layout expand="tabSheet"
            spacing="true">
        <tabSheet id="tabSheet">
            <tab id="mainInfo"
                 caption="msg://mainInfo"
                 margin="true,false,false,false"
                 spacing="true">
                <form id="fieldGroup"
                      dataContainer="performancePlanDc">
                    <column width="250px">
                        <textField id="performancePlanName" property="performancePlanName"/>
                        <textField id="description" property="description"/>
                        <pickerField id="administratorPersonGroup"
                                     captionProperty="personFioWithEmployeeNumber"
                                     property="administratorPersonGroup">
                            <actions>
                                <action id="lookup" type="picker_lookup"/>
                                <action id="clear" type="picker_clear"/>
                            </actions>
                        </pickerField>
                        <dateField id="startDate" property="startDate"/>
                        <dateField id="endDate" property="endDate"/>
                        <dateField id="accessibilityStartDate" property="accessibilityStartDate" required="true"/>
                        <dateField id="accessibilityEndDate" property="accessibilityEndDate" required="true"/>
                    </column>
                </form>
            </tab>
            <tab id="assignedPerformancePlan" caption="msg://assignedPerformancePlan"
                 margin="true, false, false, false"
                 spacing="true">
                <table id="assignedPerformancePlanTable" width="100%" height="100%"
                       dataContainer="assignedPerformancePlansDc">
                    <actions>
                        <action id="create" type="create"/>
                        <action id="edit" type="edit"/>
                        <action id="remove" type="remove"/>
                    </actions>
                    <columns>
                        <column id="assignedPerson"/>
                        <column id="assignedPerson.currentAssignment.organizationGroup"/>
                        <column id="result"/>
                        <column id="gzp"/>
                        <column id="assignedPerson.currentAssignment.positionGroup"/>
                        <column id="assignedPerson.currentAssignment.jobGroup"/>
                        <column id="assignedPerson.currentAssignment.gradeGroup"/>
                        <column id="assigned_by"/>
                        <column id="status"/>
                    </columns>
                    <buttonsPanel id="assignedPerformancePlanBtnPnl">
                        <button id="assignedCreate" action="assignedPerformancePlanTable.create"/>
                        <button id="assignedEdit" action="assignedPerformancePlanTable.edit"/>
                        <button id="assignedRemove" action="assignedPerformancePlanTable.remove"/>
                    </buttonsPanel>
                </table>
            </tab>
            <tab id="instruction" spacing="true" margin="true, false, false, false"
                 caption="msg://instruction">
                <table id="instructionTable" width="100%" height="100%" dataContainer="instructionKpiDc">
                    <actions>
                        <action id="create" type="create"/>
                        <action id="edit" type="edit"/>
                        <action id="remove" type="remove"/>
                    </actions>
                    <columns>
                        <column id="instruction"/>
                    </columns>
                    <buttonsPanel id="instructionBtnPnl">
                        <button id="instructionCreate" action="instructionTable.create"/>
                        <button id="instructionEdit" action="instructionTable.edit"/>
                        <button id="instructionRemove" action="instructionTable.remove"/>
                    </buttonsPanel>
                </table>
            </tab>
        </tabSheet>
        <hbox id="windowActions" spacing="true" width="AUTO">
            <button action="windowCommitAndClose"/>
            <button action="windowClose"/>
        </hbox>
    </layout>
</window>
